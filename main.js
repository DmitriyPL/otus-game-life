!function(){"use strict";var e={324:function(e,t,i){i.r(t)},979:function(e,t,i){i.r(t)},562:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0,t.Cell=class{constructor(e,t,i,s){this.nextType="",this.x=e,this.y=t,this.size=i,this.type=s}setType(e){this.type=e}getType(){return this.type}getNextType(){return this.nextType}setNextType(e){this.nextType=e}getCoord(e){return"x"===e?this.x*this.size:"y"===e?this.y*this.size:0}getSize(){return this.size}getX(){return this.x}getY(){return this.y}}},92:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0,t.Field=class{constructor(e,t,i,s){this.state=[],this.aliveCells=0,this.stateChanged=!1,this.canvasX=0,this.canvasY=0,this.canvas=e,this.fieldSizeX=t,this.fieldSizeY=i,this.cellSize=s,this.ctx=this.canvas.getContext("2d"),this.canvas.addEventListener("click",this.clickHandler.bind(this))}setFieldSize(e,t,i){this.fieldSizeX=e,this.fieldSizeY=t,this.cellSize=i}setupCanvas(){this.canvas.width=this.fieldSizeX*this.cellSize,this.canvas.height=this.fieldSizeY*this.cellSize}getAliveCells(){return this.aliveCells}getStateChanged(){return this.stateChanged}getAliveNeighbours(e,t){let i=0;const s=[[e-1,t-1],[e-1,t],[e-1,t+1],[e,t-1],[e,t+1],[e+1,t-1],[e+1,t],[e+1,t+1]];for(const e of s){const t=e[0],s=e[1];"alive"===this.getNeighbourType(t,s)&&(i+=1)}return i}getNeighbourType(e,t){if(e<0||e>this.fieldSizeX-1||t<0||t>this.fieldSizeY-1)return"dead";const i=this.state.find((i=>i.getX()===e&&i.getY()===t));return void 0===i?"dead":i.getType()}addCell(e){this.state.push(e)}clear(){this.state.forEach((e=>{e.setType("dead"),e.setNextType("")})),this.draw()}delCells(){this.state.length=0}draw(){this.state.forEach((e=>{const t=e.getCoord("x"),i=e.getCoord("y"),s=e.getSize();"dead"===e.getType()?(this.ctx.clearRect(t,i,s,s),this.ctx.strokeRect(t,i,s,s)):this.ctx.fillRect(t,i,s,s)}))}changeState(){this.stateChanged=!1,this.state.forEach((e=>{const t=e.getX(),i=e.getY(),s=this.getAliveNeighbours(t,i);"dead"===e.getType()&&3===s?(e.setNextType("alive"),this.aliveCells+=1,this.stateChanged=!0):"alive"===e.getType()&&(s<2||s>3)&&(e.setNextType("dead"),this.aliveCells-=1,this.stateChanged=!0)})),this.draw(),this.state.forEach((e=>{const t=e.getType(),i=e.getNextType();i!==t&&""!==i&&e.setType(i)}))}clickHandler(e){this.canvasX=this.canvas.offsetLeft+this.canvas.clientLeft,this.canvasY=this.canvas.offsetTop+this.canvas.clientTop;const t=e.pageX-this.canvasX,i=e.pageY-this.canvasY;for(const e of this.state){const s=e.getCoord("x"),n=e.getCoord("y"),l=e.getSize();if(i>n&&i<n+l&&t>s&&t<s+l){"dead"===e.getType()?(e.setType("alive"),this.aliveCells+=1):(e.setType("dead"),this.aliveCells-=1),this.draw();break}}}}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,i),l.exports}i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){i(324),i(979);const e=i(92),t=i(562);function s(e,t){localStorage.setItem("stopGame","false");const i=setInterval((()=>{e.changeState(),!1!==e.getStateChanged()&&"true"!==localStorage.getItem("stopGame")||clearInterval(i)}),t);return localStorage.setItem("refreshId",String(i)),i}function n(e){e.setupCanvas(),e.delCells();for(let i=0;i<e.fieldSizeY;i+=1)for(let s=0;s<e.fieldSizeX;s+=1)e.addCell(new t.Cell(s,i,e.cellSize,"dead"));e.draw()}function l(){const e=document.getElementById("gameSpeed");return Number(e.value)}function a(){const e=document.getElementById("sizeX"),t=document.getElementById("sizeY"),i=document.getElementById("cellSize");return{fieldSizeX:Number(e.value),fieldSizeY:Number(t.value),cellSize:Number(i.value)}}!function(){localStorage.setItem("stopGame","false");const{fieldSizeX:t,fieldSizeY:i,cellSize:c}=a(),d=document.getElementById("game-field"),o=new e.Field(d,t,i,c);n(o),document.getElementById("set-field-size").addEventListener("click",(function(e){e.preventDefault(),function(e){const{fieldSizeX:t,fieldSizeY:i,cellSize:s}=a();e.setFieldSize(t,i,s),n(e)}(o)})),document.getElementById("do-step").addEventListener("click",o.changeState.bind(o)),document.getElementById("clear-field").addEventListener("click",o.clear.bind(o)),document.getElementById("start-game").addEventListener("click",(function(e){e.preventDefault();const t=l();s(o,t)})),document.getElementById("stop-game").addEventListener("click",(function(e){e.preventDefault(),localStorage.setItem("stopGame","true")})),document.getElementById("set-game-speed").addEventListener("click",(function(e){e.preventDefault(),localStorage.setItem("stopGame","true");const t=Number(localStorage.getItem("refreshId"));clearInterval(t);const i=l();s(o,i)}))}()}()}();