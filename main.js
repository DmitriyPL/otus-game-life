!function(){"use strict";var e={324:function(e,t,i){i.r(t)},979:function(e,t,i){i.r(t)},562:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0,t.Cell=class{constructor(e){this.nextType="",this.x=0,this.y=0,this.type=e}setType(e){this.type=e}setNextType(e){this.nextType=e}setX(e){this.x=e}setY(e){this.y=e}getX(){return this.x}getY(){return this.y}getType(){return this.type}getNextType(){return this.nextType}}},92:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const s=i(562);t.Field=class{constructor(e,t,i,s){this.state=[],this.drawingCells=new Set,this.analyzedCells=new Set,this.aliveCells=0,this.stateChanged=!1,this.canvasX=0,this.canvasY=0,this.canvas=e,this.fieldSizeX=t,this.fieldSizeY=i,this.cellSize=s,this.ctx=this.canvas.getContext("2d")}defaultSetup(){this.drawingCells.clear(),this.analyzedCells.clear(),this.aliveCells=0,this.stateChanged=!1}initFieldState(){for(let e=0;e<this.fieldSizeY;++e){const t=[];for(let i=0;i<this.fieldSizeX;++i){const l=new s.Cell("dead");l.setX(i),l.setY(e),t.push(l)}this.state.push(t)}}setFieldSize(e,t,i){this.fieldSizeX=e,this.fieldSizeY=t,this.cellSize=i}setupCanvas(){this.canvas.width=this.fieldSizeX*this.cellSize,this.canvas.height=this.fieldSizeY*this.cellSize}setCurrentType(){this.analyzedCells.forEach((e=>{const t=e.getType(),i=e.getNextType();i!==t&&""!==i?e.setType(i):this.drawingCells.delete(e)}))}setNextType(){this.stateChanged=!1,this.analyzedCells.forEach((e=>{const t=this.getNeighboursCoords(e.getX(),e.getY()),i=this.getAliveNeighbours(t);"dead"===e.getType()&&3===i?(e.setNextType("alive"),this.aliveCells+=1,this.stateChanged=!0,this.addCellForDrawing(e)):"alive"===e.getType()&&(i<2||i>3)&&(e.setNextType("dead"),this.aliveCells-=1,this.stateChanged=!0,this.addCellForDrawing(e))}))}getAliveCells(){return this.aliveCells}getStateChanged(){return this.stateChanged}getNeighboursCoords(e,t){return[[e-1,t-1],[e-1,t],[e-1,t+1],[e,t-1],[e,t+1],[e+1,t-1],[e+1,t],[e+1,t+1]]}getAliveNeighbours(e){let t=0;for(const i of e){const e=i[0],s=i[1];"alive"===this.getCellType(e,s)&&(t+=1)}return t}getCellType(e,t){if(e<0||e>this.fieldSizeX-1||t<0||t>this.fieldSizeY-1)return"dead";const i=this.state[t][e];return void 0===i?"dead":i.getType()}delCells(){this.state.length=0}clearCellTypes(){this.state.forEach((e=>{e.forEach((e=>{e.setType("dead"),e.setNextType("")}))}))}addCell(e,t,i){this.state[t][e]=i}addCellForDrawing(e){this.drawingCells.add(e),this.getNeighboursCoords(e.getX(),e.getY()).forEach((e=>{const t=e[0],i=e[1];if(t>=0&&t<=this.fieldSizeX-1&&i>=0&&i<=this.fieldSizeY-1){const e=this.state[i][t];this.analyzedCells.add(e)}})),this.analyzedCells.add(e)}draw(){const e=this.cellSize;this.drawingCells.forEach((t=>{const i=t.getX()*e,s=t.getY()*e;"dead"===t.getType()?(this.ctx.clearRect(i,s,e,e),this.ctx.strokeRect(i,s,e,e)):"dead"===t.getNextType()?(this.ctx.fillStyle="blue",this.ctx.fillRect(i,s,e,e)):(this.ctx.fillStyle="black",this.ctx.fillRect(i,s,e,e))}))}drawEmptyField(){const e=this.cellSize;for(let t=0;t<this.fieldSizeY;++t)for(let i=0;i<this.fieldSizeX;++i)this.ctx.clearRect(i*e,t*e,e,e),this.ctx.strokeRect(i*e,t*e,e,e)}}}},t={};function i(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){i(324),i(979);const e=i(92);function t(e,t){localStorage.setItem("stopGame","false");const i=setInterval((()=>{e.setNextType(),e.draw(),e.setCurrentType(),!1!==e.getStateChanged()&&"true"!==localStorage.getItem("stopGame")||(clearInterval(i),e.defaultSetup(),e.clearCellTypes())}),t);return localStorage.setItem("refreshId",String(i)),i}function s(){const e=document.getElementById("gameSpeed");return Number(e.value)}function l(){const e=document.getElementById("sizeX"),t=document.getElementById("sizeY"),i=document.getElementById("cellSize");return{fieldSizeX:Number(e.value),fieldSizeY:Number(t.value),cellSize:Number(i.value)}}function a(e){this.canvasX=this.canvas.offsetLeft+this.canvas.clientLeft,this.canvasY=this.canvas.offsetTop+this.canvas.clientTop;const t=e.pageX-this.canvasX,i=e.pageY-this.canvasY,s=Math.trunc(t/this.cellSize),l=Math.trunc(i/this.cellSize),a=this.state[l][s];"dead"===a.getType()?(a.setType("alive"),this.aliveCells+=1):(a.setType("dead"),this.aliveCells-=1),this.addCellForDrawing(a),this.draw()}function n(t){const{fieldSizeX:i,fieldSizeY:s,cellSize:n}=l(),d=new e.Field(t,i,s,n);return d.initFieldState(),d.setupCanvas(),t.addEventListener("click",a.bind(d)),d}!function(){localStorage.setItem("stopGame","false");const e=n(document.getElementById("game-field"));e.drawEmptyField(),document.getElementById("set-field-size").addEventListener("click",(function(t){t.preventDefault(),function(e){const{fieldSizeX:t,fieldSizeY:i,cellSize:s}=l();e.delCells(),e.defaultSetup(),e.setFieldSize(t,i,s),e.initFieldState(),e.setupCanvas(),e.drawEmptyField()}(e)})),document.getElementById("do-step").addEventListener("click",(function(){e.setNextType(),e.draw(),e.setCurrentType()})),document.getElementById("clear-field").addEventListener("click",(function(){e.defaultSetup(),e.clearCellTypes(),e.drawEmptyField()})),document.getElementById("start-game").addEventListener("click",(function(i){i.preventDefault();const l=s();t(e,l)})),document.getElementById("stop-game").addEventListener("click",(function(e){e.preventDefault(),localStorage.setItem("stopGame","true")})),document.getElementById("set-game-speed").addEventListener("click",(function(i){i.preventDefault(),localStorage.setItem("stopGame","true");const l=Number(localStorage.getItem("refreshId"));clearInterval(l);const a=s();t(e,a)}))}()}()}();