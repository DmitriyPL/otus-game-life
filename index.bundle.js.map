{"version":3,"file":"index.bundle.js","mappings":"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","sources":["webpack://otus-game-life/./src/Classes/cell.js","webpack://otus-game-life/./src/Classes/field.js","webpack://otus-game-life/./src/setup.js","webpack://otus-game-life/webpack/bootstrap","webpack://otus-game-life/webpack/runtime/define property getters","webpack://otus-game-life/webpack/runtime/hasOwnProperty shorthand","webpack://otus-game-life/./src/index.js"],"sourcesContent":["export class Cell {\n  nextType = \"\";\n\n  constructor(x, y, size, type) {\n    this.x = x;\n    this.y = y;\n    this.size = size;\n    this.type = type;\n  }\n\n  setType(type) {\n    this.type = type;\n  }\n\n  getType() {\n    return this.type;\n  }\n\n  getNextType() {\n    return this.nextType;\n  }\n\n  setNextType(type) {\n    this.nextType = type;\n  }\n\n  getCoord(coord) {\n    return this[coord] * this.size;\n  }\n\n  getSize() {\n    return this.size;\n  }\n\n  getX() {\n    return this.x;\n  }\n\n  getY() {\n    return this.y;\n  }\n}\n","export class Field {\n  state = [];\n\n  aliveCells = 0;\n\n  stateChanged = false;\n\n  canvasX = 0;\n\n  canvasY = 0;\n\n  constructor(canvas, fieldSizeX, fieldSizeY, cellSize) {\n    this.canvas = canvas;\n    this.fieldSizeX = fieldSizeX;\n    this.fieldSizeY = fieldSizeY;\n    this.cellSize = cellSize;\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n\n  setup() {\n    this.canvas.width = this.fieldSizeX * this.cellSize;\n    this.canvas.height = this.fieldSizeY * this.cellSize;\n\n    this.canvasX = this.canvas.offsetLeft + this.canvas.clientLeft;\n    this.canvasY = this.canvas.offsetTop + this.canvas.clientTop;\n\n    this.canvas.addEventListener(\"click\", this.clickHandler.bind(this));\n  }\n\n  getAliveCells() {\n    return this.aliveCells;\n  }\n\n  init(Cell) {\n    for (let y = 0; y < this.fieldSizeY; y += 1) {\n      for (let x = 0; x < this.fieldSizeX; x += 1) {\n        this.state.push(new Cell(x, y, this.cellSize, \"dead\"));\n      }\n    }\n  }\n\n  clickHandler(e) {\n    const x = e.pageX - this.canvasX;\n    const y = e.pageY - this.canvasY;\n\n    /* eslint-disable-next-line */\n    for (const cell of this.state) {\n      const cellX = cell.getCoord(\"x\");\n      const cellY = cell.getCoord(\"y\");\n      const size = cell.getSize();\n\n      if (y > cellY && y < cellY + size && x > cellX && x < cellX + size) {\n        if (cell.getType() === \"dead\") {\n          cell.setType(\"alive\");\n          this.aliveCells += 1;\n        } else {\n          cell.setType(\"dead\");\n          this.aliveCells -= 1;\n        }\n\n        this.draw();\n\n        break;\n      }\n    }\n  }\n\n  draw() {\n    this.state.forEach((cell) => {\n      const x = cell.getCoord(\"x\");\n      const y = cell.getCoord(\"y\");\n      const size = cell.getSize();\n\n      if (cell.getType() === \"dead\") {\n        this.ctx.clearRect(x, y, size, size);\n        this.ctx.strokeRect(x, y, size, size);\n      } else {\n        this.ctx.fillRect(x, y, size, size);\n      }\n    });\n  }\n\n  changeState() {\n    this.stateChanged = false;\n\n    this.state.forEach((cell) => {\n      const cellX = cell.getX();\n      const cellY = cell.getY();\n\n      const aliveNeighbours = this.getAliveNeighbours(cellX, cellY);\n\n      if (cell.getType() === \"dead\" && aliveNeighbours === 3) {\n        cell.setNextType(\"alive\");\n        this.aliveCells += 1;\n        this.stateChanged = true;\n      } else if (\n        cell.getType() === \"alive\" &&\n        (aliveNeighbours < 2 || aliveNeighbours > 3)\n      ) {\n        cell.setNextType(\"dead\");\n        this.aliveCells -= 1;\n        this.stateChanged = true;\n      }\n    });\n\n    this.draw();\n\n    this.state.forEach((cell) => {\n      const type = cell.getType();\n      const nextType = cell.getNextType();\n\n      if (nextType !== type && nextType !== \"\") {\n        cell.setType(nextType);\n      }\n    });\n  }\n\n  getAliveNeighbours(cellX, cellY) {\n    let alive = 0;\n\n    const neighboursCoords = [\n      [cellX - 1, cellY - 1],\n      [cellX - 1, cellY],\n      [cellX - 1, cellY + 1],\n      [cellX, cellY - 1],\n      [cellX, cellY + 1],\n      [cellX + 1, cellY - 1],\n      [cellX + 1, cellY],\n      [cellX + 1, cellY + 1],\n    ];\n\n    /* eslint-disable-next-line */\n    for (const coord of neighboursCoords) {\n      const x = coord[0];\n      const y = coord[1];\n\n      const cellType = this.getNeighbourType(x, y);\n\n      if (cellType === \"alive\") {\n        alive += 1;\n      }\n    }\n\n    return alive;\n  }\n\n  getNeighbourType(x, y) {\n    if (x < 0 || x > this.fieldSizeX - 1 || y < 0 || y > this.fieldSizeY - 1) {\n      return \"dead\";\n    }\n    const findedCell = this.state.find(\n      (cell) => cell.getX() === x && cell.getY() === y\n    );\n    return findedCell.getType();\n  }\n\n  clear() {\n    this.state.forEach((cell) => {\n      cell.setType(\"dead\");\n      cell.setNextType(\"\");\n    });\n\n    this.draw();\n  }\n\n  getStateChanged() {\n    return this.stateChanged;\n  }\n}\n","export const data = {\n  cellSize: 15,\n  fieldSizeX: 50,\n  fieldSizeY: 50,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","import { data as fieldParams } from \"./setup.js\";\nimport { Field } from \"./Classes/field.js\";\nimport { Cell } from \"./Classes/cell.js\";\n\nfunction run(field) {\n  localStorage.setItem(\"stopGame\", \"false\");\n\n  const refreshId = setInterval(() => {\n    field.changeState();\n    if (\n      field.getStateChanged() === false ||\n      localStorage.getItem(\"stopGame\") === \"true\"\n    ) {\n      clearInterval(refreshId);\n    }\n  }, 100);\n}\n\nfunction init() {\n  localStorage.setItem(\"stopGame\", \"false\");\n\n  const { fieldSizeX } = fieldParams;\n  const { fieldSizeY } = fieldParams;\n  const { cellSize } = fieldParams;\n\n  const canvas = document.getElementById(\"game-field\");\n\n  const field = new Field(canvas, fieldSizeX, fieldSizeY, cellSize);\n  field.setup();\n  field.init(Cell);\n  field.draw();\n\n  const btnDoStep = document.getElementById(\"do-step\");\n  btnDoStep.addEventListener(\"click\", field.changeState.bind(field));\n\n  const btnClearField = document.getElementById(\"clear-field\");\n  btnClearField.addEventListener(\"click\", field.clear.bind(field));\n\n  const btnStartGame = document.getElementById(\"start-game\");\n  btnStartGame.addEventListener(\"click\", () => {\n    run(field);\n  });\n\n  const btnStopGame = document.getElementById(\"stop-game\");\n  btnStopGame.addEventListener(\"click\", () => {\n    localStorage.setItem(\"stopGame\", \"true\");\n  });\n}\n\ninit();\n"],"names":["Cell","x","y","size","type","this","nextType","coord","Field","canvas","fieldSizeX","fieldSizeY","cellSize","ctx","getContext","width","height","canvasX","offsetLeft","clientLeft","canvasY","offsetTop","clientTop","addEventListener","clickHandler","bind","aliveCells","state","push","e","pageX","pageY","cell","cellX","getCoord","cellY","getSize","getType","setType","draw","forEach","clearRect","strokeRect","fillRect","stateChanged","getX","getY","aliveNeighbours","getAliveNeighbours","setNextType","getNextType","alive","getNeighbourType","find","data","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","localStorage","setItem","fieldParams","document","getElementById","field","setup","init","changeState","clear","refreshId","setInterval","getStateChanged","getItem","clearInterval","run"],"sourceRoot":""}