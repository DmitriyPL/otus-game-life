!function(){"use strict";var e,t,n,i={926:function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{b:function(){return a}});var a=function(){function e(t,n,i,a){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r="nextType")in this?Object.defineProperty(this,r,{value:"",enumerable:!0,configurable:!0,writable:!0}):this[r]="",this.x=t,this.y=n,this.size=i,this.type=a}var t,n;return t=e,(n=[{key:"setType",value:function(e){this.type=e}},{key:"getType",value:function(){return this.type}},{key:"getNextType",value:function(){return this.nextType}},{key:"setNextType",value:function(e){this.nextType=e}},{key:"getCoord",value:function(e){return this[e]*this.size}},{key:"getSize",value:function(){return this.size}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},816:function(e,t,n){function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{g:function(){return o}});var o=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"state",[]),r(this,"aliveCells",0),r(this,"stateChanged",!1),r(this,"canvasX",0),r(this,"canvasY",0),this.canvas=t,this.fieldSizeX=n,this.fieldSizeY=i,this.cellSize=a,this.ctx=this.canvas.getContext("2d")}var t,n;return t=e,(n=[{key:"setup",value:function(){this.canvas.width=this.fieldSizeX*this.cellSize,this.canvas.height=this.fieldSizeY*this.cellSize,this.canvasX=this.canvas.offsetLeft+this.canvas.clientLeft,this.canvasY=this.canvas.offsetTop+this.canvas.clientTop,this.canvas.addEventListener("click",this.clickHandler.bind(this))}},{key:"getAliveCells",value:function(){return this.aliveCells}},{key:"init",value:function(e){for(var t=0;t<this.fieldSizeY;t+=1)for(var n=0;n<this.fieldSizeX;n+=1)this.state.push(new e(n,t,this.cellSize,"dead"))}},{key:"clickHandler",value:function(e){var t,n=e.pageX-this.canvasX,a=e.pageY-this.canvasY,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(this.state);try{for(r.s();!(t=r.n()).done;){var o=t.value,s=o.getCoord("x"),l=o.getCoord("y"),c=o.getSize();if(a>l&&a<l+c&&n>s&&n<s+c){"dead"===o.getType()?(o.setType("alive"),this.aliveCells+=1):(o.setType("dead"),this.aliveCells-=1),this.draw();break}}}catch(e){r.e(e)}finally{r.f()}}},{key:"draw",value:function(){var e=this;this.state.forEach((function(t){var n=t.getCoord("x"),i=t.getCoord("y"),a=t.getSize();"dead"===t.getType()?(e.ctx.clearRect(n,i,a,a),e.ctx.strokeRect(n,i,a,a)):e.ctx.fillRect(n,i,a,a)}))}},{key:"changeState",value:function(){var e=this;this.stateChanged=!1,this.state.forEach((function(t){var n=t.getX(),i=t.getY(),a=e.getAliveNeighbours(n,i);"dead"===t.getType()&&3===a?(t.setNextType("alive"),e.aliveCells+=1,e.stateChanged=!0):"alive"===t.getType()&&(a<2||a>3)&&(t.setNextType("dead"),e.aliveCells-=1,e.stateChanged=!0)})),this.draw(),this.state.forEach((function(e){var t=e.getType(),n=e.getNextType();n!==t&&""!==n&&e.setType(n)}))}},{key:"getAliveNeighbours",value:function(e,t){for(var n=0,i=0,a=[[e-1,t-1],[e-1,t],[e-1,t+1],[e,t-1],[e,t+1],[e+1,t-1],[e+1,t],[e+1,t+1]];i<a.length;i++){var r=a[i],o=r[0],s=r[1];"alive"===this.getNeighbourType(o,s)&&(n+=1)}return n}},{key:"getNeighbourType",value:function(e,t){return e<0||e>this.fieldSizeX-1||t<0||t>this.fieldSizeY-1?"dead":this.state.find((function(n){return n.getX()===e&&n.getY()===t})).getType()}},{key:"clear",value:function(){this.state.forEach((function(e){e.setType("dead"),e.setNextType("")})),this.draw()}},{key:"getStateChanged",value:function(){return this.stateChanged}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},173:function(e,t,n){n.d(t,{a:function(){return i}});var i={cellSize:15,fieldSizeX:50,fieldSizeY:50}}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e](n,n.exports,r),n.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e=r(173),t=r(816),n=r(926),function(){localStorage.setItem("stopGame","false");var i=e.a.fieldSizeX,a=e.a.fieldSizeY,r=e.a.cellSize,o=document.getElementById("game-field"),s=new t.g(o,i,a,r);s.setup(),s.init(n.b),s.draw(),document.getElementById("do-step").addEventListener("click",s.changeState.bind(s)),document.getElementById("clear-field").addEventListener("click",s.clear.bind(s)),document.getElementById("start-game").addEventListener("click",(function(){!function(e){localStorage.setItem("stopGame","false");var t=setInterval((function(){e.changeState(),!1!==e.getStateChanged()&&"true"!==localStorage.getItem("stopGame")||clearInterval(t)}),100)}(s)})),document.getElementById("stop-game").addEventListener("click",(function(){localStorage.setItem("stopGame","true")}))}()}();
//# sourceMappingURL=index.bundle.js.map